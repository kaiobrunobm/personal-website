function addValue(k, value) {
  var ftl = '';
  ftl = ftl + k + ' =';
  if (value && value.indexOf('\n') > -1) {
    ftl = ftl + '\n  ';
    ftl = ftl + value.split('\n').join('\n  ');
  } else {
    ftl = ftl + ' ' + value;
  }
  return ftl;
}
function addComment(comment) {
  var ftl = '';
  ftl = ftl + '# ' + comment.split('\n').join('\n# ');
  ftl = ftl + '\n';
  return ftl;
}
export default function js2ftl(resources, cb) {
  var ftl = '';
  Object.keys(resources).forEach(function (k) {
    var value = resources[k];
    if (typeof value === 'string') {
      ftl = ftl + addValue(k, value);
      ftl = ftl + '\n\n';
    } else {
      if (value.comment) ftl = ftl + addComment(value.comment);
      ftl = ftl + addValue(k, value.val);
      Object.keys(value).forEach(function (innerK) {
        if (innerK === 'comment' || innerK === 'val') return;
        var innerValue = value[innerK];
        ftl = ftl + addValue('\n  .' + innerK, innerValue);
      });
      ftl = ftl + '\n\n';
    }
  });
  if (cb) cb(null, ftl);
  return ftl;
}